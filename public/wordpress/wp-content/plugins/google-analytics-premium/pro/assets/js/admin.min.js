;jQuery(document).ready(function(){var t=[],n={mode:'range',disableMobile:'true',dateFormat:'Y-m-d',disable:[function(t){var a=t,m=moment(moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD')),l=moment.duration(m.diff(a)),s=l.asDays();s=s+1;var r=moment(t).tz(monsterinsights_admin.timezone),n=r.subtract(s,'d').tz(monsterinsights_admin.timezone),e=moment(),i=n.isBetween(moment('01-01-2005','MM-DD-YYYY').tz(monsterinsights_admin.timezone),e),o=moment(t).isBetween(moment('01-01-2005','MM-DD-YYYY').tz(monsterinsights_admin.timezone),e);return!i||!o}],onClose:function(s,i,e){var r=[];if(s[0]!=null&&s[1]!=null){r=s.map(function(t){return this.formatDate(t,'Y-m-d')},this)}
else{return};if((t[0]!=null&&t[1]!=null)&&(t[0]==r[0]&&t[1]===r[1])){return};jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');var n=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id').replace('monsterinsights-main-tab-',''),o=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id');swal({type:'info',title:monsterinsights_admin.refresh_report_title,text:monsterinsights_admin.refresh_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();var s={'action':'monsterinsights_refresh_reports','security':monsterinsights_admin.admin_nonce,'isnetwork':monsterinsights_admin.isnetwork,'start':r[0],'end':r[1],'report':n,};jQuery.post(ajaxurl,s,function(s){if(s.success&&s.data.html){t=r;jQuery('#monsterinsights-main-tab-'+n+' > .monsterinsights-reports-wrap').html(s.data.html);monsterinsights_equalheight2column();jQuery('#monsterinsights-main-tab-'+n+' .monsterinsights-pro-report-date-control-group .monsterinsights-pro-report-7-days').removeClass('active').disable(!1);jQuery('#monsterinsights-main-tab-'+n+' .monsterinsights-pro-report-date-control-group .monsterinsights-pro-report-30-days').removeClass('active').disable(!1);jQuery('#monsterinsights-main-tab-'+n+' .monsterinsights-pro-report-date-control-group .monsterinsights-pro-datepicker').addClass('monsterinsights-datepicker-active');swal.close()}
else{e.setDate(t);swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:s.data.message,}).catch(swal.noop)}}).then(function(t){jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')}).fail(function(s,r,n){e.setDate(t);var i=jQuery(s.responseText).text();i=i.substring(0,i.indexOf('Call Stack'));swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:i,}).catch(swal.noop);jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')})}})},};jQuery('.monsterinsights-pro-datepicker').flatpickr(n);jQuery('.monsterinsights-pro-report-date-control-group > .btn').click(function(t){t.preventDefault();var i=jQuery(this),e=jQuery(this).hasClass('monsterinsights-pro-report-7-days'),o=jQuery(this).hasClass('monsterinsights-pro-report-30-days');if(e||o){jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');var s=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id').replace('monsterinsights-main-tab-',''),a=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id'),r=e?moment().subtract(8,'days').tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'):moment().subtract(31,'days').tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'),n=moment().subtract(1,'days').tz(monsterinsights_admin.timezone).format('YYYY-MM-DD');swal({type:'info',title:monsterinsights_admin.refresh_report_title,text:monsterinsights_admin.refresh_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();var t={'action':'monsterinsights_refresh_reports','security':monsterinsights_admin.admin_nonce,'isnetwork':monsterinsights_admin.isnetwork,'start':r,'end':n,'report':s,};jQuery.post(ajaxurl,t,function(t){if(t.success&&t.data.html){jQuery(i).addClass('active').disable(!0).siblings().removeClass('active').disable(!1).removeClass('monsterinsights-datepicker-active');jQuery('#monsterinsights-main-tab-'+s+' > .monsterinsights-reports-wrap').html(t.data.html);monsterinsights_equalheight2column();swal.close()}
else{swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:t.data.message,}).catch(swal.noop)}}).then(function(t){jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')}).fail(function(t,s,e){var r=jQuery(t.responseText).text();r=r.substring(0,r.indexOf('Call Stack'));swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:r,}).catch(swal.noop);jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')})}})}});jQuery('#monsterinsights-reports-page-main-nav .monsterinsights-main-nav-item.monsterinsights-nav-item').attrchange(function(t){if(t!='class'){return};var s=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id').replace('monsterinsights-main-tab-','');if(s!=='realtime'){return};var o=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id'),n=moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'),i=moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD');jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');swal({type:'info',title:monsterinsights_admin.refresh_report_title,text:monsterinsights_admin.refresh_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();var t={'action':'monsterinsights_refresh_reports','security':monsterinsights_admin.admin_nonce,'isnetwork':monsterinsights_admin.isnetwork,'start':n,'end':i,'report':s,};jQuery.post(ajaxurl,t,function(t){if(t.success&&t.data.html){jQuery('#monsterinsights-main-tab-'+s+' > .monsterinsights-reports-wrap').html(t.data.html);monsterinsights_equalheight2column();swal.close()}
else{var e={type:'error',title:monsterinsights_admin.refresh_report_failure_title,html:t.data.message,};if(t.data.data&&t.data.data.footer){e.footer=t.data.data.footer};swal(e).catch(swal.noop)}}).then(function(t){jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')}).fail(function(t,s,e){var r=jQuery(t.responseText).text();r=r.substring(0,r.indexOf('Call Stack'));swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:r,}).catch(swal.noop);jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')})}});r();setTimeout(function(){e()},60000)});function e(error_count=0){var s=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id').replace('monsterinsights-main-tab-','');if(s!=='realtime'||error_count>5){return};if(!document.hasFocus()){jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');while(!document.hasFocus()){swal({type:'info',title:monsterinsights_admin.resume_report_title,text:monsterinsights_admin.resume_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!1,});return}};var a=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id'),n=moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'),i=moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'),o={'action':'monsterinsights_refresh_reports','security':monsterinsights_admin.admin_nonce,'isnetwork':monsterinsights_admin.isnetwork,'start':n,'end':i,'report':s,};jQuery.post(ajaxurl,o,function(t){if(t.success&&t.data.html){jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');swal({type:'info',title:monsterinsights_admin.refresh_report_title,text:monsterinsights_admin.refresh_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading()}});jQuery('#monsterinsights-main-tab-'+s+' > .monsterinsights-reports-wrap').html(t.data.html);monsterinsights_equalheight2column();jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur');swal.close()}
else{}}).then(function(t){r()}).fail(function(t,s,e){error_count++});setTimeout(function(){e(error_count)},60000)};var s;function r(){var t=0;if(s){clearTimeout(s)};s=setInterval(function(){t++;jQuery('#monsterinsights-realtime-report-timer').html(t)},1000)}});